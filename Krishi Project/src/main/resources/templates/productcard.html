<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Showcase - Agricultural Website</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
  <style>
    /* Body Layout */
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #222;
      color: white;
      height: 100vh;
      display: flex;
      justify-content: flex-start;
      flex-direction: column;
      overflow-x: hidden;
    }

    /* Menu Bar */
    .menu-bar {
      width: 250px;
      background-color: #4CAF50;
      color: white;
      padding: 20px;
      position: fixed;
      height: 100%;
      top: 0;
      left: -250px; /* Initially hidden */
      z-index: 100;
      box-shadow: 2px 0px 5px rgba(0, 0, 0, 0.1);
      transition: left 0.3s ease;
    }

    .menu-bar.show {
      left: 0; /* Show when toggled */
    }

    /* Menu Links */
    .menu-bar a {
      display: block;
      color: white;
      padding: 15px;
      text-decoration: none;
      font-size: 16px;
      margin-bottom: 15px;
      border-radius: 5px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .menu-bar a:hover {
      background-color: lightyellow; /* Light yellow background on hover */
      color: black; /* Change text color to black */
    }

    /* Toggle Menu Button */
    .menu-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      background-color: transparent;
      color: white; /* White color for the button */
      padding: 10px 20px;
      cursor: pointer;
      font-size: 20px;
      font-weight: bold;
      z-index: 200;
      transition: color 0.3s ease;
    }

    .menu-toggle:hover {
      color: rgba(72, 255, 72, 0.8);
    }

    /* Page Content */
    .content-area {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      text-align: center;
      width: 100%;
      padding-left: 280px; /* Adjusted so content doesn't overlap with the menu */
      box-sizing: border-box;
      margin-top: 30px;
    }

    /* Title and Search Bar Styling */
    .top-section {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .title {
      font-family: 'Montserrat', sans-serif;
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
      color: #fff;
    }

    .search-bar {
      width: 350px;
      padding: 15px;
      font-size: 16px;
      background-color: #000;
      color: white;
      border-radius: 5px;
      border: none;
      text-align: center;
      margin-bottom: 30px;
    }

    .search-bar::placeholder {
      color: gray;
    }

    /* Product Cards Section */
    .product-cards {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
    }

    .product-card {
      width: 200px;
      background-color: white;
      color: black;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      text-align: center;
      position: relative;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .product-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .product-card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 5px;
    }

    .product-card h3 {
      font-size: 16px;
      margin: 10px 0;
    }

    .product-card p {
      font-size: 14px;
      color: #777;
    }

    .product-card .price {
      font-size: 18px;
      font-weight: bold;
      color: #4CAF50;
    }

    .product-card button {
      margin-top: 10px;
      background-color: #4CAF50;
      color: white;
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s ease;
    }

    .product-card button:hover {
      background-color: #388e3c;
    }

    /* Action Buttons Section */
    .action-buttons {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    .action-buttons button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }

    .action-buttons button:hover {
      background-color: #388e3c;
    }

    /* Add Product Form */
    .add-product-form {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      justify-content: center;
      align-items: center;
    }

    .add-product-form input, .add-product-form button {
      padding: 10px;
      font-size: 16px;
      width: 200px;
      border-radius: 5px;
      border: none;
      margin-top: 10px;
    }

    .add-product-form input {
      background-color: rgba(255, 255, 255, 0.3);
      color: white;
    }

    .add-product-form button {
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
    }

    .add-product-form button:hover {
      background-color: #388e3c;
    }

    /* Cart Section */
    .cart-section {
      margin-top: 30px;
      width: 100%;
      text-align: center;
    }

    .cart-item {
      background-color: white;
      color: black;
      padding: 15px;
      border-radius: 10px;
      margin: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .cart-item h3 {
      font-size: 16px;
      margin: 10px 0;
    }

    .cart-item .quantity {
      font-size: 14px;
    }

    .product-options {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
    }

    .product-options button {
      font-size: 12px;
      background-color: #f44336; /* Red for remove */
    }

    .product-options button.edit {
      background-color: #ff9800; /* Orange for edit */
    }

    .quantity-box {
      display: none; /* Initially hidden */
      margin-top: 10px;
      width: 100%;
      text-align: center;
    }

    .quantity-box input {
      width: 50px;
      padding: 5px;
      font-size: 14px;
    }

  </style>
</head>
<body>

<!-- Menu Bar -->
<div class="menu-bar" id="menu-bar">
  <a href="home" class="menu-option"> </a>

  <a href="login" class="login-register">Login</a>
  <a href="registration" class="login-register">Registration</a>
  <a href="dashboard" class="menu-option">Dashboard</a>
  <a href="training" class="menu-option">Training</a>
  <a href="plantation" class="menu-option">Hire Farmer</a>

</div>

<!-- Toggle Menu Button -->
<span class="menu-toggle" id="menu-toggle" onclick="toggleMenu()">â˜° Menu</span>

<!-- Main Content Area -->
<div class="content-area" onclick="closeMenu()">
  <!-- Title and Search Bar Section -->
  <div class="top-section">
    <div class="title">Fresh from the Farm</div>
    <input type="text" class="search-bar" id="search-bar" placeholder="Search for products..." onkeyup="filterProducts()">
  </div>

  <!-- Action Buttons Section -->
  <div class="action-buttons">
    <button onclick="toggleAddProductForm()">Add Product</button>
    <button onclick="toggleRemoveOptions()">Remove Product</button>
    <button onclick="toggleEditOptions()">Edit Product Details</button>
  </div>

  <!-- Add Product Form -->
  <div class="add-product-form" id="add-product-form" style="display: none;">
    <input type="text" id="new-product-name" placeholder="Product Name">
    <input type="file" id="new-product-image" onchange="previewImage(event)" placeholder="Product Image">
    <input type="text" id="new-product-details" placeholder="Product Details">
    <input type="text" id="new-product-price" placeholder="Product Price">
    <button onclick="saveNewProduct()">Add Product</button>

  </div>

  <!-- Product Cards Section -->
  <div class="product-cards" id="product-cards"></div>

  <!-- Cart Section -->
  <div class="cart-section" id="cart-section">
    <h2>Your Cart</h2>
    <div id="cart-items"></div>
  </div>

</div>

<script>
  // Menu Bar Toggle
  function toggleMenu() {
    const menuBar = document.getElementById("menu-bar");
    menuBar.classList.toggle("show");
  }

  function closeMenu() {
    const menuBar = document.getElementById("menu-bar");
    menuBar.classList.remove("show");
  }

  // Load Products from Local Storage
  function loadProductsFromLocalStorage() {
    const storedProducts = localStorage.getItem('products');
    if (storedProducts) {
      products = JSON.parse(storedProducts);
    } else {
      products = []; // If no products in localStorage, use empty array
    }
     displayProducts();

  }



  let products = JSON.parse(localStorage.getItem('products')) || [
    {name: 'Tomato Plants', image: '', details: 'High-quality rice', price: '20$', selected: false, quantity: 1},
    {name: 'Chillie', image: ' ', details: 'Fresh wheat', price: '15$', selected: false, quantity: 1},
    {name: 'Fruits', image: '', details: 'Organic corn', price: '10$', selected: false, quantity: 1}
  ];

  let cart = [];
  let isRemoveMode = false;
  let isEditMode = false;

  // Save to local storage
  function saveProductsToLocalStorage() {
    localStorage.setItem('products', JSON.stringify(products));
  }

  // Display products after initialization
  displayProducts();



  // Display Products
  function displayProducts() {
    const productCards = document.getElementById("product-cards");
    productCards.innerHTML = ''; // Clear previous products before rendering

    products.forEach((product, index) => {
      const productCard = document.createElement("div");
      productCard.className = "product-card";

      // Only show the remove button in remove mode
      productCard.innerHTML = `
      <img src="${product.image}" alt="${product.name}">
      <h3 id="product-name-${index}">
        ${isEditMode ? `<input type="text" value="${product.name}" id="edit-product-name-${index}">` : product.name}
      </h3>
      <p id="product-details-${index}">
        ${isEditMode ? `<textarea id="edit-product-details-${index}">${product.details}</textarea>` : product.details}
      </p>
      <p class="price" id="product-price-${index}">
        ${isEditMode ? `<input type="text" value="${product.price}" id="edit-product-price-${index}">` : product.price}
      </p>
      ${isEditMode ? `<input type="file" id="edit-product-image-${index}" onchange="previewEditImage(event, ${index})">` : ''}
      <div class="product-options">
        ${isRemoveMode ? `<button onclick="removeProduct(${index})">Remove</button>` : ''}
        ${isEditMode ? `<button class="edit" onclick="saveProductChanges(${index})">Save</button>` : ''}
        <button onclick="toggleSelectProduct(${index})">${product.selected ? 'Remove from Cart' : 'Add to Cart'}</button>
      </div>
    `;
      productCards.appendChild(productCard);
    });
  }

  // Preview Image before Edit
  function previewEditImage(event, index) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        products[index].image = e.target.result;
        displayProducts();
      };
      reader.readAsDataURL(file);
    }
  }

  // Toggle Select Product for Cart
  function toggleSelectProduct(index) {
    const product = products[index];
    if (product.selected) {
      cart = cart.filter(item => item !== product);
    } else {
      cart.push(product);
    }
    product.selected = !product.selected;
    displayProducts();
    displayCart();
  }

  // Display Cart Items
  function displayCart() {
    const cartItems = document.getElementById("cart-items");
    cartItems.innerHTML = '';

    cart.forEach((item, index) => {
      const cartItem = document.createElement("div");
      cartItem.className = "cart-item";
      cartItem.innerHTML = `
      <h3>${item.name}</h3>
      <p class="quantity">Quantity: ${item.quantity}</p>
    `;
      cartItems.appendChild(cartItem);
    });
  }

  // Add New Product
  function toggleAddProductForm() {
    const form = document.getElementById("add-product-form");
    form.style.display = form.style.display === 'none' ? 'block' : 'none';
  }


  // Save New Product
  function saveNewProduct() {
    const name = document.getElementById("new-product-name").value;
    const imageFile = document.getElementById("new-product-image").files[0];
    const details = document.getElementById("new-product-details").value;
    const price = document.getElementById("new-product-price").value;

    if (!name || !imageFile || !details || !price) {
      alert("Please fill in all fields and provide an image.");
      return;
    }

    const reader = new FileReader();
    reader.onload = function(event) {
      const imageSrc = event.target.result;

      // Add product only after the image is fully read
      products.push({ name, image: imageSrc, details, price, selected: false, quantity: 1 });

      // Save and display updated products
      saveProductsToLocalStorage();
      displayProducts();  // Ensure products are displayed after addition
    };

    reader.readAsDataURL(imageFile); // Start reading file

    // Clear input fields after file is fully processed
    reader.onloadend = function() {
      document.getElementById("new-product-name").value = '';
      document.getElementById("new-product-image").value = '';
      document.getElementById("new-product-details").value = '';
      document.getElementById("new-product-price").value = '';
      toggleAddProductForm();
    };
  }


  // Toggle Remove Mode
   function toggleRemoveOptions() {
    isRemoveMode = !isRemoveMode;
    isEditMode = false;
    displayProducts(); // Refresh the product display to reflect mode change
  }


  // Toggle Edit Mode
  function toggleEditOptions() {
    isEditMode = !isEditMode;
    isRemoveMode = false;
    displayProducts();
  }


  // Remove Product
  function removeProduct(index) {
    products.splice(index, 1);
    saveProductsToLocalStorage(); // Save updated products to local storage
    displayProducts();

  }

  // Save Edited Product Details
  function saveProductChanges(index) {
    const newName = document.getElementById(`edit-product-name-${index}`).value;
    const newDetails = document.getElementById(`edit-product-details-${index}`).value;
    const newPrice = document.getElementById(`edit-product-price-${index}`).value;

    products[index].name = newName;
    products[index].details = newDetails;
    products[index].price = newPrice;

    saveProductsToLocalStorage(); // Save edited product to local storage
    isEditMode = false;
    displayProducts();


  }

  // Filter Products based on Search
  function filterProducts() {
    const query = document.getElementById("search-bar").value.toLowerCase();
    const filteredProducts = products.filter(product => product.name.toLowerCase().includes(query));
    displayFilteredProducts(filteredProducts);
  }

  // Display Filtered Products
  function displayFilteredProducts(filteredProducts) {
    const productCards = document.getElementById("product-cards");
    productCards.innerHTML = '';

    filteredProducts.forEach((product, index) => {
      const productCard = document.createElement("div");
      productCard.className = "product-card";
      productCard.innerHTML = `
      <img src="${product.image}" alt="${product.name}">
      <h3 id="product-name-${index}">${product.name}</h3>
      <p id="product-details-${index}">${product.details}</p>
      <p class="price" id="product-price-${index}">${product.price}</p>
      <div class="product-options">
        <button onclick="toggleSelectProduct(${index})">${product.selected ? 'Remove from Cart' : 'Add to Cart'}</button>
      </div>
    `;
      productCards.appendChild(productCard);
    });
  }



  loadProductsFromLocalStorage();
  // Display Products Initially
  displayProducts();
</script>

</body>
</html>
